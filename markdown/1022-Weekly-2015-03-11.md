/*<<

 Title: Weekly-2015-03-11
 Date: 2015-03-11 21:09:26
 Tags: html, css, javascript
 Category: Weekly
 Sources:
   me: http://mpr0xy.com
>>*/

## 前言

已经4个月没有写博客了，我好像失去了自我一样，沉浸在所谓的生活当中。也许这并不是我像要的生活,不过着不是重点，重点是我已经意识到了这个问题，我又需要改变了。

## 纠结的问题

### 适配-放大缩小

为了让设计复杂的页面完美适配各种尺寸的手机。我们可以让页面根据屏幕的尺寸自动方大缩小

首先，我们尝试了[zoom](http://www.w3chtml.com/css3/properties/user-interface/zoom.html)属性。

zoom属性可以把元素放大，是真的方大，会把周围的元素撑开。但遗憾的是firefox不支持zoom。IE和Chrome等时支持的。连IE6都支持。

但是在使用zoom方大后的元素，使用jQuery取高宽，不会有明显变化，可能有轻微差别。在Chrome中测试。但是对offset有影响。

如何上firefox能方大缩小呢？
在支持3.5版本以上使用```-moz-transform: scale(x)```。但这带来了另外一个问题，scale不会影响周围的元素，当使用scale的元素变大时，会覆盖在周围元素上面。所以在使用时就出现了坑。

有人为了统一使用，在每次使用scale时，就计算出方大元素的大小，在元素的外面放一个相同大小的div元素，以此来达到zoom的效果。虽然说这种方法，可以让按固定参数设计的页面，一下适应多种屏幕尺寸。但是最后我却没有常用起来。

多的还是按照百分比布局，按照屏幕宽度进行百分比换算，虽然写的时候比较麻烦，但是缩放基本不需要js参与，感觉更加轻巧。而上面的方法需要引入不少js计算。

### 浏览器兼容-试一试

突然产品告诉我360浏览器下页面样式问题。我一看果然，IE里不支持initial。我在一个样式中使用:

```
top: initial;
```

这样让top属性置空。没想到IE8不支持这个属性。我就纠结IE8里怎么让top属性置空。最后还是同事说试一试auto。使用auto在IE8达到了initial同样的效果。看来还是基础不精，试了前头，没有试完全。。。。

### 开发流程-破晓

公司的后端架构是django。我们写的大多数页面都要写成django模板，部分只调用API的页面，也需要django的渲染(这里就涉及到配url和写个view来加载膜拜并返回给浏览器)。而把整个后端代码运行起来，是个费时间的事（后来把开发环境配置了vagrant）。但是前端们还是不想管后端代码，况且开发页面是，后端的逻辑还没有开发好，没办法在正式的代码库里进行测试和调试。我就弄了一个假的django环境，简称mockdjango来编写前端代码。

前端页面还是按照django的模板来编写，具有模块化和复用特点。我们在mockdjango里定义好url(实际情况时前后端协商，前端来兼容后端)，在view里写假数据直接渲染给模板来完成页面的编写和调试。这其中的数据格式和名称则根据开发中一直在更新的文档（多希望开发前就写好大多数文档）保证前后端统一。

这样我们在mockdjango里编写的代码怎么合到真的代码库和后端的真正联合测试呢。这里我们使用nodejs写了一个脚本dist。来把mockdjango里的前端模板和资源文件拷贝到代码库对应的目录，并将里面的一些路径和变量替换成代码库对应的。这个过程完全自动化完成，只需要第一次运行dist前，定义几个规则即可。

后来发现百度的[fis](http://fis.baidu.com/)包含了dist做的事情，在逐步迁移到fis来，况且fis还有发布功能，真的很贴心，但是要和django配合，我们还是对我们的mockdjango做了一些改动。

### 发布上线-高潮

就目前的这个前端开发流程和上线机制。我还没有想出好的方式改进上线机制(在不改变现有机制的情况下)。现在git和svn混用，正式上线靠人工使用文件对比工具上线代码。感觉一直在被搞，还是没有高潮。